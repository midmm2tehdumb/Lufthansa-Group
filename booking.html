<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WestJet Airlines - Booking</title>
<link rel="stylesheet" href="style.css">
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  h2 { text-align: center; margin-bottom: 20px; }
  .booking-form { max-width: 500px; margin: auto; display: flex; flex-direction: column; gap: 15px; }
  select, button { padding: 10px; font-size: 1rem; }
  #results { margin-top: 20px; text-align: center; font-weight: bold; }
</style>
</head>
<body>

<!-- Navbar -->
<nav>
  <div class="logo">WestJet Airlines</div>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="fleet.html">Fleet</a></li>
    <li><a href="destinations.html">Destinations</a></li>
    <li><a href="booking.html">Booking</a></li>
    <li><a href="info.html">Information</a></li>
    <li><a href="rp.html">RP</a></li>
  </ul>
</nav>

<h2>Book Your Flight</h2>

<div class="booking-form">
  <label for="departure">Departure Airport:</label>
  <select id="departure">
    <option value="">-- Select Departure --</option>
  </select>

  <label for="arrival">Arrival Airport:</label>
  <select id="arrival">
    <option value="">-- Select Arrival --</option>
  </select>

  <button onclick="calculateFlight()">Check Flight</button>
</div>

<div id="results"></div>

<!-- ‚úàÔ∏è Flight Arrival Estimator Section -->
<div id="flightCalc" style="margin: 50px auto; text-align: center; max-width: 500px;">
  <h3 style="color:#1A3F70;">üïê Flight Arrival Estimator</h3>
  <p>Enter flight distance (in kilometers):</p>
  
  <input type="number" id="distance" placeholder="e.g. 11300" style="padding: 8px; width: 70%; border-radius: 8px; border: 1px solid #ccc;">
  <button onclick="calcArrival()" style="background-color:#1A3F70; color:white; border:none; padding:10px 20px; border-radius:8px; margin-left:8px; cursor:pointer;">Calculate</button>
  
  <div id="output" style="margin-top:20px; font-size:1.1rem;"></div>
</div>

<!-- üåç Flight Distance + Aircraft Selector Script -->
<script>
// Airport coordinates
const airportCoords = {
};

// Populate dropdowns
const departureSelect = document.getElementById('departure');
const arrivalSelect = document.getElementById('arrival');

Object.keys(airportCoords).forEach(code => {
  const option1 = document.createElement('option');
  option1.value = code;
  option1.textContent = code;
  departureSelect.appendChild(option1);

  const option2 = document.createElement('option');
  option2.value = code;
  option2.textContent = code;
  arrivalSelect.appendChild(option2);
});

// Calculate distance (Haversine)
function getDistance(coord1, coord2) {
  const R = 6371;
  const dLat = (coord2[0]-coord1[0]) * Math.PI/180;
  const dLon = (coord2[1]-coord1[1]) * Math.PI/180;
  const a = Math.sin(dLat/2)**2 + Math.cos(coord1[0]*Math.PI/180) * Math.cos(coord2[0]*Math.PI/180) * Math.sin(dLon/2)**2;
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return R * c;
}

// Suggest aircraft
function suggestPlane(distance) {
  if (distance < 275) return "Dash 8-400 / 737-700 / 737-800 / 737-8MAX";
  if (distance < 5000) return "737-700 / 737-800 / 737-8MAX";
  if (distance < 6000) return "737-8MAX";
  if (distance < 11000) return "787-10 / 777-300ER / 787-9";
  if (distance < 13000) return "777-300ER / 787-9";
  if (distance < 50000) return "Too far ‚Äî choose another route.";
}

// Estimate time
function estimateTime(distance, plane) {
  let speed = 850;
  if (plane.includes("787") || plane.includes("777")) speed = 900;
  return Math.round(distance / speed);
}

// Main calculateFlight function
function calculateFlight() {
  const dep = departureSelect.value;
  const arr = arrivalSelect.value;
  if (!dep || !arr) {
    alert("Please select both airports!");
    return;
  }
  if (dep === arr) {
    alert("Departure and arrival cannot be the same!");
    return;
  }

  const distance = getDistance(airportCoords[dep], airportCoords[arr]);
  const plane = suggestPlane(distance);
  const hours = estimateTime(distance, plane);

  document.getElementById('results').innerHTML = `
    Distance: ${distance.toFixed(1)} km<br>
    Suggested Plane: ${plane}<br>
    Estimated Flight Time: ~${hours} hr
  `;
}
</script>

<!-- üïê Clock + Arrival Estimator Script -->
<script>
function calcArrival() {
  const km = parseFloat(document.getElementById("distance").value);
  if (isNaN(km) || km <= 0) {
    document.getElementById("output").innerHTML = "‚ö†Ô∏è Please enter a valid distance.";
    return;
  }

  const speed = 900; 
  const hours = km / speed;

  const now = new Date();
  const arrival = new Date(now.getTime() + hours * 3600000);

  const totalMinutes = Math.round(hours * 60);
  const hh = Math.floor(totalMinutes / 60);
  const mm = totalMinutes % 60;

  document.getElementById("output").innerHTML = `
    <p>üïê Departure (your time): <strong>${now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</strong></p>
    <p>‚úàÔ∏è Estimated Flight Time: <strong>${hh}h ${mm}m</strong></p>
    <p>üõ¨ Arrival (your time): <strong>${arrival.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</strong></p>
  `;
}
</script>

<!-- Disclaimer -->
<section class="disclaimer" style="background-color:#1A3F70; color:white; padding:30px; text-align:center; margin-top:50px;">
  <p>
    <strong>Disclaimer:</strong> WestJet Airlines is a virtual GeoFS airline and does not represent the real-life WestJet Airlines Ltd. 
    This website and content are intended for entertainment and educational purposes within the virtual flight simulator community.
  </p>
</section>

</body>
</html>
